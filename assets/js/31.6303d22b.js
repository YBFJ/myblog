(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{613:function(a,s,t){"use strict";t.r(s);var o=t(3),n=Object(o.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"mongodb-无法启动问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-无法启动问题"}},[a._v("#")]),a._v(" MongoDB 无法启动问题")]),a._v(" "),t("p",[a._v("可能是因为 mac 进行了更新系统，我的 MongoDB 无法启动，主要参考的是"),t("a",{attrs:{href:"https://www.cnblogs.com/boris-et/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Boris 丶 et"),t("OutboundLink")],1),a._v("  的一篇博文"),t("a",{attrs:{href:"https://www.cnblogs.com/boris-et/p/10858147.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("链接"),t("OutboundLink")],1),a._v("\n不过不同之处是在下载压缩包之后将其放置的路径是"),t("code",[a._v("/usr/local/opt")]),a._v("，DK 的意思是这个是专门用来做用户配置的，执行的命令是进入桌面后，")]),a._v(" "),t("ol",[t("li",[a._v("将解压缩的 mongodb 的包重命名为 mongodb，在 terminal 中执行复制命令，将文件夹加入"),t("code",[a._v("/usr/local/opt")])])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" mongodb /usr/local/opt\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v("\n")])])]),t("p",[a._v("回到根目录之后")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" .bash_profile\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" ~/.bash_profile\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("进行环境变量的配置")])]),a._v(" "),t("p",[a._v("在环境变量的定义之前加上，为啥要连接到 bin 文件夹是因为 bin 下面是 binary 可执行的二进制文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/opt/mongodb/bin:\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置alias，除了命令之外不要出现空格")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("mongod")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sudo mongod --dbpath=/Usr/local/opt/mongodb/data/db"')]),a._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("保存退出 "),t("code",[a._v("source .bash_profile")]),a._v("刷新配置文件生效，不知道为什么在我的 terminal 中无法使用 source 命令，解决办法是直接退出终端再重启。")])]),a._v(" "),t("p",[a._v("或者 ctrl+D 退出终端，新建一次终端窗口实现配置文件生效\n"),t("code",[a._v("echo $PATH")]),a._v("中发现 mongodb 的 bin 路径后可以继续执行")]),a._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[a._v("启动 mongodb")])]),a._v(" "),t("p",[a._v("必须要加上 dbpath 才能够将 mongodb 的 data 存储在需要的路径中，否则 mongodb 一直要去"),t("code",[a._v("/data/db")]),a._v("下面去寻找，但是在 mac 中，我是没有建立这个文件夹的权限的，mongod 中的 d 是守护精灵的意思，相当于是启动 mongodb 服务，我之前的数据库的一个问题是忘记了存放 data 的数据在哪里，导致 data 无法恢复，这次我就存储在/usr/local/opt/mongodb/data/db，data 文件夹和 log 文件夹都在 bin 文件夹同一层级，这样的话就不会忘记了，为了不使用这么长的命令名，我建立一个 alias。\n（后续验证中发现，alias 需要写在 bash_profile，否则重启 terminal 后这个 alias 会消失）")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" mongod --dbpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/opt/mongodb/data/db\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("mongod")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'sudo mongod --dbpath=/usr/local/opt/mongodb/data/db'")]),a._v("\n\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("关闭 mongodb")])]),a._v(" "),t("p",[a._v("在新建连接终端里面输入"),t("code",[a._v("mongo")]),a._v("，进入 emmm 我的想法是 mongodb 的 shell，因为可以执行各种 mongodb 的命令，然后输入"),t("code",[a._v("use admin")]),a._v(",再输入"),t("code",[a._v("db.shutdownServer()")]),a._v("\n或者直接在启动 mongod 的服务中 ctrl + C 也是可以关闭这个服务的，一定要记得及时关闭这个服务，否则，会一直在终端里面运行")])])}),[],!1,null,null,null);s.default=n.exports}}]);